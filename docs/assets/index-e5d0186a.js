var y=Object.defineProperty;var P=(o,t,s)=>t in o?y(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var d=(o,t,s)=>(P(o,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const v=(o,t,s)=>t<o?o:t<s?t:s,L=(o,t)=>{let s,n;o.addEventListener("dragstart",r=>{const i=document.createElement("div");s=r.clientX-o.offsetLeft,n=r.clientY-o.offsetTop,r.dataTransfer.setDragImage(i,0,0)});const e=r=>{const i=r.clientY-n,l=r.clientX-s,c=t.offsetTop+t.offsetHeight-o.offsetHeight,u=t.offsetTop,a=t.offsetLeft+t.offsetWidth-o.offsetWidth,h=t.offsetLeft;o.style.top=`${v(c,i,u)}px`,o.style.left=`${v(a,l,h)}px`};o.addEventListener("drag",r=>{e(r)}),o.addEventListener("dragend",r=>{e(r)})},A=o=>{const t=o.offsetWidth/o.offsetHeight,s=.1;o.addEventListener("wheel",n=>{const e=n.deltaY*t*s,r=n.deltaY*s,i=(n.clientX-o.offsetLeft)/o.offsetWidth,l=(n.clientY-o.offsetTop)/o.offsetHeight;o.style.width=`${o.offsetWidth+e}px`,o.style.height=`${o.offsetHeight+r}px`,o.style.left=`${o.offsetLeft-e*i}px`,o.style.top=`${o.offsetTop-r*l}px`})},X=(o,t)=>{let s=[],n=0,e,r;if(t===0)return 1;for(let i=0;i<t;i++)s.push(i);for(;s[0]!==o.length-t;){e=1;for(let i=0;i<t;i++)e*=o[s[i]];for(n+=e,r=t-1;r>0&&s[r]===o.length-t+r;)r--;if(s[r]!==o.length-t+r){s[r]++;for(let i=r+1;i<t;i++)s[i]=s[r]+i-r}}e=1;for(let i=0;i<t;i++)e*=o[s[i]];return n+=e,n},Y=o=>{let t=[],s=[];const n=o.length;for(let e=0;e<n;e++)s.push(-o[e]);for(let e=0;e<n+1;e++)t.push(X(s,n-e));return t},C=(o,t)=>{let s=0,n;s=t[0];for(let e=1;e<t.length;e++){n=1;for(let r=0;r<e;r++)n=n*o;s+=t[e]*n}return s},w=(o,t)=>{const s=o.length;let n=[],e=[],r=[],i;for(let l=0;l<o.length;l++)e.push(0);for(let l=0;l<s;l++){r=structuredClone(o),r.splice(l,1),n=Y(r),i=C(o[l],n);for(let c=0;c<o.length;c++)n[c]/=i,n[c]*=t[l],e[c]+=n[c]}return e},x=(o,t,s)=>{let n=[],e=[],r=o.length,i;for(let l=0;l<s;l++){e=[];for(let c=0;c<s;c++){i=0;for(let u=0;u<r;u++)i+=o[u]**(l+c);e.push(i)}n.push(e)}return n},S=(o,t,s)=>{let n=[],e=o.length,r;for(let i=0;i<s;i++){r=0;for(let l=0;l<e;l++)r+=t[l]*o[l]**i;n.push(r)}return n},p=(o,t)=>{let s=structuredClone(o),n=o.length;for(let e=0;e<n;e++)s[e].push(t[e]);return s},E=(o,t)=>{let s=[],n=o.length;for(let e=0;e<n;e++)s.push(o[e][t]);return s},T=(o,t,s)=>{let n=structuredClone(o),e=[];return e=n.splice(t,1,n[s]),n.splice(s,1,e[0]),n},b=o=>o<0?o*-1:o,W=(o,t)=>{let s=structuredClone(o),n,e=b(o[t][t]),r,i;const l=o.length;n=e;for(let c=t+1;c<l;c++)r=b(s[c][t]),n<r&&(n=r,i=c);return n>e&&(s=T(s,t,i)),s},$=o=>{let t=structuredClone(o),s=o.length,n=o[1].length,e;for(let r=0;r<s;r++){t=W(t,r),e=t[r][r];for(let i=r;i<n;i++)t[r][i]/=e;for(let i=0;i<r;i++){e=t[i][r];for(let l=r;l<n;l++)t[i][l]-=t[r][l]*e}for(let i=r+1;i<s;i++){e=t[i][r];for(let l=r;l<n;l++)t[i][l]-=t[r][l]*e}}return t},H=(o,t,s)=>{let n=x(o,t,s),e=S(o,t,s),r=p(n,e);return r=$(r),E(r,r.length)},I=o=>{let t=[],s=o.length;for(let n=0;n<s-1;n++)t.push(o[n+1]-o[n]);return t},q=(o,t,s)=>{let n=0,e,r;n=t[0],e=o-s;for(let i=1;i<t.length;i++){r=1;for(let l=0;l<i;l++)r=r*e;n+=t[i]*r}return n},O=(o,t,s,n)=>{const e=o.length;n.push(0),s.push(1),t.push(0);for(let r=1;r<e;r++)n.push(o[r-1]),s.push(2*(o[r-1]+o[r])),t.push(o[r]);return n.push(0),s.push(1),t.push(0),1},F=(o,t)=>{let s=[],n=t.length;s.push(0);for(let e=1;e<n-1;e++)s.push(3*(t[e+1]-t[e])/o[e]-3*(t[e]-t[e-1])/o[e-1]);return s.push(0),s},R=(o,t,s,n)=>{let e=structuredClone(o),r=structuredClone(t),i=structuredClone(s),l=structuredClone(n),c,u=n.length;for(let a=0;a<u-1;a++)c=r[a],r[a]=1,e[a]/=c,l[a]/=c,c=i[a+1],i[a+1]=0,r[a+1]-=e[a]*c,l[a+1]-=l[a]*c;l[u]/=r[u],r[u]=1;for(let a=1;a<u-1;a++)l[a]-=e[a]*l[a-1];return l},j=(o,t)=>{let s=I(o),n,e=[],r=[],i=[],l=[],c=[],u=[],a=[],h=[];l=F(s,t),O(s,e,r,i),a=R(e,r,i,l),n=s.length;for(let f=0;f<n;f++)c.push((t[f+1]-t[f])/s[f]-s[f]*(2*a[f]+a[f+1])/3),u.push((a[f+1]-a[f])/(3*s[f]));for(let f=0;f<n;f++)h.push([]);return h=p(h,t),h=p(h,c),h=p(h,a),h=p(h,u),h};class k{constructor(){d(this,"divHTML");d(this,"ventanaHTML");d(this,"btnAgregarPuntosAct",!1);d(this,"puntos",[]);d(this,"puntosX",[]);d(this,"puntosY",[]);this.divHTML=document.querySelector(".grafico"),this.ventanaHTML=document.querySelector(".ventana"),L(this.divHTML,this.ventanaHTML),A(this.divHTML),this.divHTML.addEventListener("click",t=>{if(this.btnAgregarPuntosAct){const s=t.clientX-this.divHTML.offsetLeft,n=t.clientY-this.divHTML.offsetTop;this.agregarPunto(new m(s,n))}})}agregarPunto(t){t.divHTML.style.top=`${t.y/this.divHTML.offsetHeight*100}%`,t.divHTML.style.left=`${t.x/this.divHTML.offsetWidth*100}%`,this.divHTML.append(t.divHTML),this.puntos.push(t),this.puntosX.push(t.x),this.puntosY.push(t.y)}agregarLinea(t){t.divHTML.style.width=`${t.largo/this.divHTML.offsetWidth*100}%`,this.divHTML.append(t.divHTML)}graficarFuncion(t){let n=0,e;for(;n<this.divHTML.offsetWidth;)e=t(n),e<this.divHTML.offsetHeight&&this.agregarPunto(new m(n,e)),n+=5}borrarTodo(){this.divHTML.replaceChildren("")}toggleBtnAgregarPuntos(){this.btnAgregarPuntosAct=!this.btnAgregarPuntosAct}obtenerCoefLagrange(){return w(this.puntosX,this.puntosY)}obtenerCoefMinimosCuadrados(t){return H(this.puntosX,this.puntosY,t)}obtenerCoefSplinesCubicos(){return j(this.puntosX,this.puntosY)}graficarPolinomio(t){this.graficarFuncion(s=>C(s,t))}graficarSplinesCubicos(){let s=this.obtenerCoefSplinesCubicos(),n=this.puntosX[0];for(let e=0;e<this.puntosX.length-1;e++)for(;n<this.puntosX[e+1];)this.agregarPunto(new m(n,q(n,s[e],this.puntosX[e]))),n+=1}}class m{constructor(t,s){d(this,"x");d(this,"y");d(this,"divHTML");this.x=t,this.y=s,this.divHTML=document.createElement("div"),this.divHTML.className="punto"}}const g=new k,M=document.querySelector("#btn-limpiar"),N=document.querySelector("#btn-agregar-puntos"),D=document.querySelector("#btn-lagrange");M.addEventListener("click",()=>{g.borrarTodo()});N.addEventListener("click",()=>{g.toggleBtnAgregarPuntos()});D.addEventListener("click",()=>{g.graficarPolinomio(g.obtenerCoefLagrange())});
