var P=Object.defineProperty;var L=(o,t,r)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r;var h=(o,t,r)=>(L(o,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const v=(o,t,r)=>t<o?o:t<r?t:r,A=(o,t)=>{let r,n;o.addEventListener("dragstart",s=>{const i=document.createElement("div");r=s.clientX-o.offsetLeft,n=s.clientY-o.offsetTop,s.dataTransfer.setDragImage(i,0,0)});const e=s=>{const i=s.clientY-n,l=s.clientX-r,a=t.offsetTop+t.offsetHeight-o.offsetHeight,c=t.offsetTop,u=t.offsetLeft+t.offsetWidth-o.offsetWidth,d=t.offsetLeft;o.style.top=`${v(a,i,c)}px`,o.style.left=`${v(u,l,d)}px`};o.addEventListener("drag",s=>{e(s)}),o.addEventListener("dragend",s=>{e(s)})},S=o=>{const t=o.offsetWidth/o.offsetHeight,r=.1;o.addEventListener("wheel",n=>{const e=n.deltaY*t*r,s=n.deltaY*r,i=(n.clientX-o.offsetLeft)/o.offsetWidth,l=(n.clientY-o.offsetTop)/o.offsetHeight;o.style.width=`${o.offsetWidth+e}px`,o.style.height=`${o.offsetHeight+s}px`,o.style.left=`${o.offsetLeft-e*i}px`,o.style.top=`${o.offsetTop-s*l}px`})},X=(o,t)=>{let r=[],n=0,e,s;if(t===0)return 1;for(let i=0;i<t;i++)r.push(i);for(;r[0]!==o.length-t;){e=1;for(let i=0;i<t;i++)e*=o[r[i]];for(n+=e,s=t-1;s>0&&r[s]===o.length-t+s;)s--;if(r[s]!==o.length-t+s){r[s]++;for(let i=s+1;i<t;i++)r[i]=r[s]+i-s}}e=1;for(let i=0;i<t;i++)e*=o[r[i]];return n+=e,n},Y=o=>{let t=[],r=[];const n=o.length;for(let e=0;e<n;e++)r.push(-o[e]);for(let e=0;e<n+1;e++)t.push(X(r,n-e));return t},y=(o,t)=>{let r=0,n;r=t[0];for(let e=1;e<t.length;e++){n=1;for(let s=0;s<e;s++)n=n*o;r+=t[e]*n}return r},w=(o,t)=>{const r=o.length;let n=[],e=[],s=[],i;for(let l=0;l<o.length;l++)e.push(0);for(let l=0;l<r;l++){s=structuredClone(o),s.splice(l,1),n=Y(s),i=y(o[l],n);for(let a=0;a<o.length;a++)n[a]/=i,n[a]*=t[l],e[a]+=n[a]}return e},x=(o,t,r)=>{let n=[],e=[],s=o.length,i;for(let l=0;l<r;l++){e=[];for(let a=0;a<r;a++){i=0;for(let c=0;c<s;c++)i+=o[c]**(l+a);e.push(i)}n.push(e)}return n},E=(o,t,r)=>{let n=[],e=o.length,s;for(let i=0;i<r;i++){s=0;for(let l=0;l<e;l++)s+=t[l]*o[l]**i;n.push(s)}return n},g=(o,t)=>{let r=structuredClone(o),n=o.length;for(let e=0;e<n;e++)r[e].push(t[e]);return r},q=(o,t)=>{let r=[],n=o.length;for(let e=0;e<n;e++)r.push(o[e][t]);return r},T=(o,t,r)=>{let n=structuredClone(o),e=[];return e=n.splice(t,1,n[r]),n.splice(r,1,e[0]),n},b=o=>o<0?o*-1:o,W=(o,t)=>{let r=structuredClone(o),n,e=b(o[t][t]),s,i;const l=o.length;n=e;for(let a=t+1;a<l;a++)s=b(r[a][t]),n<s&&(n=s,i=a);return n>e&&(r=T(r,t,i)),r},$=o=>{let t=structuredClone(o),r=o.length,n=o[1].length,e;for(let s=0;s<r;s++){t=W(t,s),e=t[s][s];for(let i=s;i<n;i++)t[s][i]/=e;for(let i=0;i<s;i++){e=t[i][s];for(let l=s;l<n;l++)t[i][l]-=t[s][l]*e}for(let i=s+1;i<r;i++){e=t[i][s];for(let l=s;l<n;l++)t[i][l]-=t[s][l]*e}}return t},H=(o,t,r)=>{let n=x(o,t,r),e=E(o,t,r),s=g(n,e);return s=$(s),q(s,s.length)},I=o=>{let t=[],r=o.length;for(let n=0;n<r-1;n++)t.push(o[n+1]-o[n]);return t},D=(o,t,r)=>{let n=0,e,s;n=t[0],e=o-r;for(let i=1;i<t.length;i++){s=1;for(let l=0;l<i;l++)s=s*e;n+=t[i]*s}return n},F=(o,t,r,n)=>{const e=o.length;n.push(0),r.push(1),t.push(0);for(let s=1;s<e;s++)n.push(o[s-1]),r.push(2*(o[s-1]+o[s])),t.push(o[s]);return n.push(0),r.push(1),t.push(0),1},M=(o,t)=>{let r=[],n=t.length;r.push(0);for(let e=1;e<n-1;e++)r.push(3*(t[e+1]-t[e])/o[e]-3*(t[e]-t[e-1])/o[e-1]);return r.push(0),r},O=(o,t,r,n)=>{let e=structuredClone(o),s=structuredClone(t),i=structuredClone(r),l=structuredClone(n),a,c=n.length;for(let u=0;u<c-1;u++)a=s[u],s[u]=1,e[u]/=a,l[u]/=a,a=i[u+1],i[u+1]=0,s[u+1]-=e[u]*a,l[u+1]-=l[u]*a;l[c]/=s[c],s[c]=1;for(let u=1;u<c-1;u++)l[u]-=e[u]*l[u-1];return l},k=(o,t)=>{let r=I(o),n,e=[],s=[],i=[],l=[],a=[],c=[],u=[],d=[];l=M(r,t),F(r,e,s,i),u=O(e,s,i,l),n=r.length;for(let f=0;f<n;f++)a.push((t[f+1]-t[f])/r[f]-r[f]*(2*u[f]+u[f+1])/3),c.push((u[f+1]-u[f])/(3*r[f]));for(let f=0;f<n;f++)d.push([]);return d=g(d,t),d=g(d,a),d=g(d,u),d=g(d,c),d};class R{constructor(){h(this,"divHTML");h(this,"ventanaHTML");h(this,"btnAgregarPuntosAct",!1);h(this,"puntos",[]);h(this,"puntosX",[]);h(this,"puntosY",[]);this.divHTML=document.querySelector(".grafico"),this.ventanaHTML=document.querySelector(".ventana"),A(this.divHTML,this.ventanaHTML),S(this.divHTML),this.divHTML.addEventListener("click",t=>{if(this.btnAgregarPuntosAct){const r=t.clientX-this.divHTML.offsetLeft,n=t.clientY-this.divHTML.offsetTop,e=new m(r,n);this.agregarPunto(e),this.puntos.push(e),this.puntosX.push(e.x),this.puntosY.push(e.y)}})}agregarPunto(t){t.divHTML.style.top=`${t.y/this.divHTML.offsetHeight*100}%`,t.divHTML.style.left=`${t.x/this.divHTML.offsetWidth*100}%`,this.divHTML.append(t.divHTML)}agregarLinea(t){t.divHTML.style.width=`${t.largo/this.divHTML.offsetWidth*100}%`,this.divHTML.append(t.divHTML)}graficarFuncion(t){let n=0,e;for(;n<this.divHTML.offsetWidth;)e=t(n),e<this.divHTML.offsetHeight&&this.agregarPunto(new m(n,e)),n+=5}borrarTodo(){this.divHTML.replaceChildren(""),this.puntos=[],this.puntosX=[],this.puntosY=[]}toggleBtnAgregarPuntos(){this.btnAgregarPuntosAct=!this.btnAgregarPuntosAct}obtenerCoefLagrange(){return w(this.puntosX,this.puntosY)}obtenerCoefMinimosCuadrados(t){return H(this.puntosX,this.puntosY,t)}obtenerCoefSplinesCubicos(){return k(this.puntosX,this.puntosY)}graficarPolinomio(t){this.graficarFuncion(r=>y(r,t))}graficarSplinesCubicos(){let r=this.obtenerCoefSplinesCubicos(),n=this.puntosX[0];for(let e=0;e<this.puntosX.length-1;e++)for(;n<this.puntosX[e+1];)this.agregarPunto(new m(n,D(n,r[e],this.puntosX[e]))),n+=1}}class m{constructor(t,r){h(this,"x");h(this,"y");h(this,"divHTML");this.x=t,this.y=r,this.divHTML=document.createElement("div"),this.divHTML.className="punto"}}const p=new R,j=document.querySelector("#btn-limpiar"),N=document.querySelector("#btn-agregar-puntos"),B=document.querySelector("#btn-lagrange"),G=document.querySelector("#btn-splines-cubicos"),C=document.querySelector(".form-min-cuadrados");j.addEventListener("click",()=>{p.borrarTodo()});N.addEventListener("click",()=>{p.toggleBtnAgregarPuntos()});B.addEventListener("click",()=>{p.graficarPolinomio(p.obtenerCoefLagrange())});G.addEventListener("click",()=>{p.graficarSplinesCubicos()});C.addEventListener("submit",o=>{let t;o.preventDefault(),t=new FormData(C).get("grado-minimos-cuadrados"),p.graficarPolinomio(p.obtenerCoefMinimosCuadrados(t))});
